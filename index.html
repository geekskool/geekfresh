<!DOCTYPE html>
<html>

<head>
    <title> Geek Fresh </title>
</head>

<body>
    <div id="main-div">
        <template id="inside-div">
            <img src="">
            <div id="desc"></div>
        </template>
    </div>
    <script>

    function loadDoc() {
        var str = "__dirname"
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (xhttp.readyState == 4 && xhttp.status == 200) {
                var responseText = JSON.parse(xhttp.responseText);
                // console.log(responseText);
                for (var i = 0; i < responseText.length; i++) {
                    var content = document.querySelector("template").content;
                    var firstChild = content.firstElementChild
                    firstChild.src = '/images/' + responseText[i].image;
                     var lastChild = content.lastElementChild;
                    lastChild.innerHTML = responseText[i].description;

                    var main = document.getElementById("main-div");
                    main.appendChild(document.importNode(content, true));
                    // var immg = content.

                }
            }
        };

        xhttp.open("GET", "/all", true);
        xhttp.send();
    }

    var body = document.getElementsByTagName("body")[0];

    body.addEventListener("loadDoc", init(), false);

    function init() {
            alert("it works!");
    }; 

    </script>
</body>

</html>
